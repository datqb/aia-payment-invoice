window.CQ_Analytics||(window.CQ_Analytics={});
(function(){CQ_Analytics.DataProvider=function(){function h(a){return a&&"string"==typeof a?(a=a.match(RegExp("\\$\\{([\\w/]*)\\}","ig")))?a:[]:[]}var f=window.ContextHub,l=window.ClientContext,k=f||l,d=k;return{hasStore:function(a){return d===f?"undefined"!==ContextHub.getStore(a):"undefined"!==CQ_Analytics.CCM.stores[a]},getStores:function(){if(d===f){var a={},b=ContextHub.getAllStores();Object.keys(b).forEach(function(e,g){var c=b[e];a[c.name]={};a[c.name].data=c.getTree()});return a}return CQ_Analytics.CCM.getStores()},
setItem:function(a,b,e){d===f?ContextHub.setItem("/store/"+a+"/"+b,e):CQ_Analytics.CCM.stores[a].setProperty(b,e)},getItem:function(a,b){return d===f?ContextHub.getItem("/store/"+a+"/"+b)||"":CQ_Analytics.CCM.stores[a].getProperty(b)},reset:function(a){d===f?ContextHub.getStore(a).reset():CQ_Analytics.CCM.stores[a].reset()},exists:function(){return d===f?ContextHub&&ContextHub.version:CQ_Analytics&&CQ_Analytics.ClientContextMgr&&CQ_Analytics.ClientContextMgr.isConfigLoaded},onReady:function(a){if(d===
f)ContextHub.eventing.on([ContextHub.Constants.EVENT_ALL_STORES_READY,ContextHub.Constants.EVENT_STORES_PARTIALLY_READY],function(b,e){a.call(this)},null,!0);else CQ_Analytics.CCM.areStoresInitialized?a.call(this):CQ_Analytics.CCM.addListener("storesinitialize",function(b){a.call(this)})},setType:function(a){d=a},getType:function(){return d?d:k},replaceVariables:function(a){if(!a)return a;var b="",e=a;for(a=h(a);0<a.length&&-1==b.indexOf(a.join());){for(var g=0;g<a.length;g++){var c=a[g];c=!c||2>
c.length?null:c.substring(2,c.length-1);var m=d===f?ContextHub.getItem(c):CQ_Analytics.ClientContext.get(c);e=e.replace(new RegExp("\\$\\{"+c+"\\}","ig"),m)}b+=a.join();a=h(e)}return e}}}()})();